<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Developer's Guide | Downlink </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Developer's Guide | Downlink ">
    <meta name="generator" content="docfx 2.18.5.0">
    
    <link rel="shortcut icon" href="../../assets/favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc">
    <meta property="docfx:tocrel" content="toc">
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../assets/downlink-logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
                <ul class="nav level1 navbar-nav">
                  <li class="">
                    <a href="../../doc/user/intro.html" title="User Documentation" class="">User Documentation</a>
                  </li>
                  <li class="active">
                    <a href="../../doc/dev/intro.html" title="Developer Guides" class="active">Developer Guides</a>
                  </li>
                  <li class="">
                    <a href="../../api/index.html" title="Source Reference" class="">Source Reference</a>
                  </li>
                </ul>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div>
              <div class="sidefilter">
                <form class="toc-filter">
                  <span class="glyphicon glyphicon-filter filter-icon"></span>
                  <input type="text" id="toc_filter_input" placeholder="Enter here to filter..." onkeypress="if(event.keyCode==13) {return false;}">
                </form>
              </div>
              <div class="sidetoc">
                <div class="toc" id="toc">
                  
                  <ul class="nav level1">
                    <li class="">
                      <a href="intro.html" title="Introduction" class="">Introduction</a>
                    </li>
                    <li class="">
                      <a href="contributing.html" title="Contributing" class="">Contributing</a>
                    </li>
                    <li class="active">
                      <a href="developers.html" title="Developer's Guide" class="active">Developer's Guide</a>
                    </li>
                    <li class="">
                      <a href="hosting.html" title="Hosting" class="">Hosting</a>
                    </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Guides</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="plugins.html" title="Plugins" class="">Plugins</a>
                          </li>
                          <li class="">
                            <a href="storage.html" title="Storage Backends" class="">Storage Backends</a>
                          </li>
                          <li class="">
                            <a href="scheme-clients.html" title="Scheme Clients" class="">Scheme Clients</a>
                          </li>
                        </ul>  </li>
                  </ul>        </div>
              </div>
            </div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="developers-guide">Developer&#39;s Guide</h1>

<div class="TIP"><h5>Tip</h5><p>You can check the <a href="../../api/index.html">Developer Reference</a> above for full API source reference, directly from the source code.</p>
</div>
<h2 id="building">Building</h2>
<p>Building this project is super-simple: run <code>build.ps1</code> if you&#39;re on Windows, or <code>build.sh</code> if you&#39;re on Linux.</p>
<blockquote><p>To build the documentation, you may also need <code>wkhtmltopdf</code> installed.</p>
</blockquote>
<h3 id="packaging">Packaging</h3>
<p>To do a complete build of the tool <em>and</em> build all packages, you will need to have Docker installed and available on your host (and accessible to the user running the build script). The build script will complete all the packaging steps in a series of Docker containers so this may be a slow process the first time you run it as the relevant images are pulled from the Hub.</p>
<h2 id="introduction">Introduction</h2>
<p>Downlink has a lot of moving parts, so the code base may appear quite daunting at first, but fear not! While there are a lot of individual components, they are mostly quite simple and a lot of the plumbing/boilerplate is already taken care of by framework code.</p>
<h3 id="extension-points">Extension points</h3>
<p>Downlink does include some specifically designed extensions points, such as the <code>IRemoteStorage</code>, <code>IPatternMatcher</code> and <code>ISchemeClient</code> interfaces. Working with these interfaces is explained in more detail below, and in the other documents available on the left.</p>
<h2 id="storage">Storage</h2>
<p>Downlink is primarily a gateway which means the app artifacts must actually be stored on a remote backend. In Downlink, that backend is an implementation of the <code>IRemoteStorage</code> interface, a simple abstraction over any storage service.</p>
<p>The <code>IRemoteStorage</code> interface is deliberately simplistic, relying on returning a single <code>Uri</code> for the requested version, or throwing an implementation of <code>NotFoundException</code> (from the <code>Downlink.Core.Diagnostics</code> namespace) if it can&#39;t find a match.</p>
<p>Returning a <code>Uri</code> rather than the artifact itself enables Downlink&#39;s built-in proxying support allowing for end users to hit the storage backend directly, or to proxy everything through Downlink itself.</p>
<h3 id="storage-uris">Storage URIs</h3>
<p>Note that the <code>Uri</code> returned from an <code>IRemoteStorage</code> implementation can be any valid URI, and it will be passed directly to the response handler in Downlink itself (an <code>IResponseHandler</code> implementation). Out of the box, URIs with the &#39;http&#39;, &#39;https&#39; or &#39;file&#39; URIs are automatically handled and returned to the user. If Downlink doesn&#39;t know how to handle a URI scheme, it will return a <em>412 Precondition Failed</em> status.</p>
<h2 id="pattern-matching">Pattern Matching</h2>
<blockquote><p>Make sure to read the <a href="../user/matching.html">user docs on version matching</a> first!</p>
</blockquote>
<p>Matching from a requested version (a <code>VersionSpec</code> instance) to a file in the remote storage is performed by either an <code>IMatchStrategy</code> implementation (for backend-specific logic) or a simpler <code>IPatternMatcher</code> implementation (backend-agnostic).</p>
<p>Pattern matchers are passed a &quot;path&quot; to each file found on the remote backend, and asked to match against a specific version. The first time this match returns <code>true</code>, that file is returned from the backend.</p>
<h2 id="dependency-injection">Dependency Injection</h2>
<p>This app includes dependency injection support for most of the framework and app code. Simply include the types you need in your constructor, and the app will attempt to resolve this dependency from the DI container. Note this will only work where you have registered your types with the container (such as in <code>Startup.cs</code>).</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/agc93/downlink/blob/hosting-refactor/docfx/doc/dev/developers.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            Downlink is MIT licensed and © Alistair Chapman 2017
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
