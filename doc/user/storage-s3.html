<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>AWS S3 Storage for Downlink | Downlink </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="AWS S3 Storage for Downlink | Downlink ">
    <meta name="generator" content="docfx 2.18.5.0">
    
    <link rel="shortcut icon" href="../../assets/favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc">
    <meta property="docfx:tocrel" content="toc">
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../assets/downlink-logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
                <ul class="nav level1 navbar-nav">
                  <li class="active">
                    <a href="../../doc/user/intro.html" title="User Documentation" class="active">User Documentation</a>
                  </li>
                  <li class="">
                    <a href="../../doc/dev/intro.html" title="Developer Guides" class="">Developer Guides</a>
                  </li>
                  <li class="">
                    <a href="../../api/index.html" title="Source Reference" class="">Source Reference</a>
                  </li>
                </ul>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div>
              <div class="sidefilter">
                <form class="toc-filter">
                  <span class="glyphicon glyphicon-filter filter-icon"></span>
                  <input type="text" id="toc_filter_input" placeholder="Enter here to filter..." onkeypress="if(event.keyCode==13) {return false;}">
                </form>
              </div>
              <div class="sidetoc">
                <div class="toc" id="toc">
                  
                  <ul class="nav level1">
                    <li class="">
                      <a href="intro.html" title="Introduction" class="">Introduction</a>
                    </li>
                    <li class="">
                      <a href="getting-started.html" title="Getting Started" class="">Getting Started</a>
                    </li>
                    <li class="">
                      <a href="configuration.html" title="Configuration" class="">Configuration</a>
                    </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Storage</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="matching.html" title="Version Matching" class="">Version Matching</a>
                          </li>
                          <li class="">
                            <a href="storage-gh.html" title="GitHub Releases" class="">GitHub Releases</a>
                          </li>
                          <li class="">
                            <a href="storage-az.html" title="Azure Storage" class="">Azure Storage</a>
                          </li>
                          <li class="active">
                            <a href="storage-s3.html" title="Amazon S3" class="active">Amazon S3</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <a href="faq.html" title="FAQ" class="">FAQ</a>
                    </li>
                  </ul>        </div>
              </div>
            </div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="aws-s3-storage-for-downlink">AWS S3 Storage for Downlink</h1>

<p>The <code>Downlink.S3</code> library (bundled with Downlink) adds support for AWS S3 as a remote storage backend.</p>
<h2 id="activating-the-aws-s3-backend">Activating the AWS S3 backend</h2>
<blockquote><p>Check the <a href="configuration.html">configuration guide</a> for full details</p>
</blockquote>
<p>You can quickly enable the AWS S3 backend by setting the <strong><code>Storage</code></strong> configuration key to &quot;S3&quot;.</p>
<p>This will invoke the <code>AddS3Storage()</code> method and add AWS S3 Storage to your application.</p>
<h2 id="configuration">Configuration</h2>
<p>The AWS S3 backend requires configuration for the credential profile and bucket name you want to use to be added to your app configuration (i.e. <code>downlink.json</code> or <code>downlink.yml</code>).</p>
<pre><code class="lang-json">{
  &quot;AWS&quot;: {
    &quot;Profile&quot;: &quot;local-creds-profile&quot;,
    &quot;Region&quot;: &quot;us-west-2&quot;,
    &quot;Bucket&quot;: &quot;downlink&quot;
  },
}
</code></pre><pre><code class="lang-yaml">AWS:
  Profile: &#39;local-test-profile&#39;
  Region: &#39;us-west-2&#39;
  Bucket: &#39;downlink&#39;
</code></pre><h2 id="how-it-works">How it works</h2>
<p>Much like the <a href="storage-az.html">Azure backend</a>, the S3 backend uses hierarchical storage of app artifacts, and defaults to using the <code>container-name/version/platform/architecture</code> form. For example:</p>
<pre><code class="lang-text"># Path inside bucket
/v1.2/windows/x64/myapp.msi
</code></pre><p>Will be resolved for the <code>/v1.2/windows/x64</code> path. Note that this mode requires each &quot;directory&quot; to contain only one file (Downlink will just return the first file in the matching directory).</p>
<h3 id="alternate-modes">Alternate modes</h3>
<p>You can also provide the <code>MatchStrategy</code> option under <code>AWS</code> configuration to control the matching behaviour.</p>
<p>Using <code>FlatVersion</code> results in a request for <code>/v1.2/windows/x64</code> being mapped to the <code>/v1.2</code> directory in the container, and the first file with <code>windows</code> and <code>x64</code> in the name will be returned. Likewise, <code>FlatPlatform</code> will use the same method for the first file in the <code>/windows</code> directory.</p>
<p>Finally the <code>Flat</code> strategy just matches all files in the top level of the container against all three properties, and is not recommended if at all possible.</p>
<blockquote><p>The default behaviour can be specified using the <code>Search</code> strategy config</p>
</blockquote>
<h3 id="force-name-matching">Force Name Matching</h3>
<p>Set the <code>AWS/ForceNameMatching</code> option to <code>true</code> to also force any matches to include the requested version in the file name. This is useful if you have more than one file in the target folder (such as metadata etc).</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/agc93/downlink/blob/hosting-refactor/docfx/doc/user/storage-s3.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            Downlink is MIT licensed and © Alistair Chapman 2017
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
